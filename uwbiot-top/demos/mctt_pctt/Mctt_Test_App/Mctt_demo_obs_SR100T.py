# Copyright 2023 NXP
#
# NXP Confidential. This software is owned or controlled by NXP and may only
# be used strictly in accordance with the applicable license terms.  By
# expressly accepting such terms or by downloading, installing, activating
# and/or otherwise using the software, you are agreeing that you have read,
# and that you agree to comply with and are bound by, such license terms.  If
# you do not agree to be bound by the applicable license terms, then you may
# not retain, install, activate or otherwise use the software.
#
print("\n\n\nOBSERVER\n\n")

import Mctt_Core as pnp

SESSION_ID = [0x44, 0x33, 0x22, 0x11]

UWB_Command_Reset = [0x20, 0x00, 0x00, 0x01, 0x00]

UWB_CoreGetConfig = [0x20, 0x02, 0x00, 0x00]

UWB_COreGetCapsInfo = [0x20,0x03,0x00,0x00]

UWB_SessionInit_Ranging =  [0x21, 0x00, 0x00, 0x05] + SESSION_ID + [0x00]

UWB_AllGetApp_Config =[0x21, 0x04, 0x00, 0x05] + SESSION_ID + [0x00]

UWB_SetObserverApp_COnfig = [0x21 ,0x03 ,0x00 ,0x4F] + SESSION_ID + [0x16 ,0x22 ,0x01 ,0x01 ,0x11 ,0x01 ,0x06 ,0x32 ,0x02 ,0x05 ,0x00 ,0x01 ,0x01 ,0x06 ,0x03 ,0x01 ,0x01 ,0x12 ,0x01 ,0x01 ,0x2C ,0x01 ,0x00 ,0x04 ,0x01 ,0x09 ,0x14 ,0x01 ,0x09 ,0x1F ,0x01 ,0x00 ,0x0B ,0x01 ,0x00 ,0x26 ,0x01 ,0x00 ,0x06 ,0x02 ,0xA1 ,0xAA ,0x02 ,0x01 ,0x00 ,0x27 ,0x02 ,0xA6 ,0xC6 ,0x28 ,0x06 ,0x22 ,0x74 ,0x89 ,0x5F ,0x98 ,0x58 ,0x17 ,0x01 ,0x01 ,0x15 ,0x01 ,0x02 ,0x29 ,0x01 ,0x01 ,0x16 ,0x01 ,0x00 ,0x35 ,0x01 ,0x01 ,0x3C ,0x01 ,0x01]

UWB_StartRanging = [0x22, 0x00, 0x00, 0x04] + SESSION_ID

Observer_Ranging_command_list = [
    UWB_CoreGetConfig,
    UWB_COreGetCapsInfo,
    UWB_SessionInit_Ranging,
    UWB_AllGetApp_Config,
    UWB_SetObserverApp_COnfig,
    UWB_StartRanging,
    ]


def main():

    pnp.run(Observer_Ranging_command_list, SESSION_ID)


if __name__ == '__main__':
    main()
